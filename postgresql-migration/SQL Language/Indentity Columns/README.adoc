= Identity Columns (SERIAL)
:toc:
:toc-title: 목차

== 개요
오라클 12c 부터 지원하는 기능으로 테이블을 생성할 때, 자동으로 값이 증가되는(시퀀스 처럼) 컬럼입니다. + 
 + 

시퀀스 옵션을 통해서 시작 값, 최소 값, 증가 값, 최대 값 등을 지정할 수 있습니다.

== 예시

=== Oracle
[source, sql]
----
CREATE TABLE emp (
    emp_id NUMBER GENERATED BY DEFAULT AS IDENTITY(START WITH 100 INCREMENT BY 10), 
    emp_name VARCHAR2(35) NOT NULL
);
----

=== PostgreSQL
[source, sql]
----
-- 1번 방법 (Serial)
CREATE TABLE emp (emp_id  SERIAL PRIMARY KEY, emp_name VARCHAR(35) NOT NULL);
ALTER SEQUENCE emps_emp_id_seq RESTART WITH 100 INCREMENT BY 10;

-- 2번 방법(identity column)
CREATE TABLE emp (
emp_id integer GENERATED BY DEFAULT AS IDENTITY(START WITH 100 INCREMENT BY 10),
emp_name varchar(35) not null);

----


== 전환방법
PostgreSQL에는 위와 같은 동작을 하는 기능이 두 가지 있습니다.

1. SERIAL 타입을 이용하여 기능을 구현하는 방법 + 
 - *호환성 : 낮음*
 - SERIAL을 이용해서 컬럼을 생성할 경우, integer 타입의 컬럼이 생성되고, 그 값은 테이블명_컬럼명_seq 시퀀스의 nextval 값을 넣고, 시퀀스의 소유권을 해당 테이블에 옮겨주는 것과 동일하게 동작합니다.

2. 오라클과 동일한 IDENTITY COLUMN 기능 사용
- *호환성 : 높음*
 - PostgreSQL 10부터 지원하는 기능입니다.
 - SERIAL과 마찬가지로 자체적으로 시퀀스를 생성하고 해당 시퀀스를 이용해서 값을 넣게 됩니다. 
 - Oracle과 호환성이 높은 타입으로 문법 및 사용방법이 동일합니다.
 - Serial과의 차이는, 문법이 조금 더 복잡하지만 SQL 표준에 더욱 가깝다는 점이 있습니다


*변환 방법* + 
 IDENTITY COLUMN 기능을 그대로 사용시 Table의 Column Data Type만 PostgreSQL에 맞는 타입으로 변환하면 됩니다. + 
 Data Type은 xref:Table/Common Data Types/README.adoc#[Table]항목을 참고

