= Aggregative Functions

[options="header"]
|===
|Oracle |함수 설명 |PostgreSQL |함수 설명 |변환 가능 |변환 방법
|ABS
|절대값 ABS(-11.3) -> 11.3
|ABS
|절대값 ABS(-11.3) -> 11.3
|O
|변환 필요 없음
|CEIL
|내림 CEIL(24.9) -> 24 / CEIL(-24.9) -> 24
|CEIL / CEILING
|내림 CEIL(24.9) -> 24 / CEIL(-24.9) -> 24
|O
|변환 필요 없음
|FLOOR
|올림 FLOOR(43.7) -> 44 FLOOR(-43.7) -> -44
|FLOOR
|올림 FLOOR(43.7) -> 44 FLOOR(-43.7) -> -44
|O
|변환 필요 없음
|MOD
|반올림
|MOD
|반올림
|O
|변환 필요 없음
|TRUNC
|소수점 버림
|TRUNC
|소수점 버림
|O
|변환 필요 없음
|CONCAT
|문자열 합치기
|CONCAT / 또는 \|\|
|문자열 합치기
|O 
|(PostgreSQL의 지원 범위가 더 넓음)
|LOWER / UPPER
|대소문자 변환
|LOWER / UPPER
|대소문자 변환
|O
|변환 필요 없음
|LPAD / RPAD
|1번 파라미터의 좌 / 우측 끝에서 부터 2번 파라미터의 길이로 자르고 1번 파라미터보다 잘라야 할 길이가 길 경우, 3번 파라미터로 채워 넣는다
|LPAD / RPAD
|1번 파라미터의 좌 / 우측 끝에서 부터 2번 파라미터의 길이로 자르고 1번 파라미터보다 잘라야 할 길이가 길 경우, 3번 파라미터로 채워 넣는다
|O
|변환 필요 없음
|REGEXP_REPLACE
|1번 파라미터에서 2번 파라미터인 정규식에 부합하는 대상을 3번 파라미터로 교체합니다.
|REGEXP_REPLACE
|1번 파라미터에서 2번 파라미터인 정규식에 부합하는 대상을 3번 파라미터로 교체합니다.
|O
|변환 필요 없음
|REGEXP_SUBSTR
|정규식을 이용하여 문자열 자르기
|REGEXP_MATCHES / SUBSTRING
|정규식을 이용하여 문자열 자르기
|Δ
|PG에서는 SUBSTRING이 정규식도 지원하므로 SUBSTRING을 사용 하거나, REGEXP_MATCHES 함수로 대체가 가능
|REPLACE
|1번 파라미터에서 2번 파라미터를 찾아서 3번 파라미터로 변경한다.
|REPLACE
|1번 파라미터에서 2번 파라미터를 찾아서 3번 파라미터로 변경한다.
|O
|변환 필요 없음
|LTRIM / RTRIM
|1번 파라미터에서 2번 파라미터를 찾아서 좌 / 우측의 내용을 모두 없애줍니다.
|LTRIM / RTRIM
|1번 파라미터에서 2번 파라미터를 찾아서 좌 / 우측의 내용을 모두 없애줍니다.
|O
|변환 필요 없음
|SUBSTR
|1번 파라미터의 2번 파라미터 위치부터 3번 파라미터 길이만큼 문자열을 자릅니다.
|SUBSTRING
|1번 파라미터의 2번 파라미터 위치부터 3번 파라미터 길이만큼 문자열을 자릅니다.
|Δ
|위치 값을 음수(-)로 줄 경우, Oracle은 입력 값의 뒤에서 부터 읽지만, PostgreSQL은 그렇지 않음
|TRIM
|2번 파라미터를 1번 파라미터의 문자열 양쪽 끝에서 부터 모두 가져옵니다.
|TRIM
|2번 파라미터를 1번 파라미터의 문자열 양쪽 끝에서 부터 모두 가져옵니다.
|Δ
|Oracle은 1 Character만 지원하며 PostgreSQL은 여러개의 문자를 지원하며 해당 문자의 모든 조합이 다 지워집니다. 추가적으로, 문법이 다릅니다. Oracle : TRIM(both 'A' from 'abcda') -> 'bcd'  /  PostgreSQL : TRIM(both from 'abcda', 'a'
|ASCII
|문자의 아스키 코드 값 또는 문자열에서 가장 앞 문자의 아스키 코드값을 출력해줍니다.
|ASCII
|문자의 아스키 코드 값 또는 문자열에서 가장 앞 문자의 아스키 코드값을 출력해줍니다.
|O
|변환 필요 없음
|INSTR
|1번 파라미터 문자열에서 2번 파라미터 문자열의 위치를 찾습니다.
|미지원
|미지원
|Δ
|User Defined Function을 이용해서 구현할 수 있음.
|LENGTH
|문자열의 길이를 알려줍니다. 
|LENGTH
|문자열의 길이를 알려줍니다. 
|O
|변환 필요 없음
|REGEXP_COUNT
|문자열에서 정규식에 해당하는 문자열이 몇개가 있는지 확인해줍니다.
|미지원
|미지원
|Δ
|.
|REGEXP_INSTR
|문자열에서 정규식에 해당하는 문자열의 위치를 알려줍니다.
|미지원
|미지원
|Δ
|.
|ADD_MONTHS
|1번 파라미터(날짜)에 2번 파라미터(월) 만큼 더한 날짜를 반환합니다.
|없음
|없음
|Δ
|Orafce 사용 또는 사용자 정의 함수로 구현 가능 
CREATE FUNCTION add_months(start DATE, months INT) RETURNS DATE AS
$$
  SELECT (start + (months \|\| ' months')::INTERVAL)::DATE
$$
LANGUAGE sql IMMUTABLE
|CURRENT_DATE
|현재 세션의 타임존 날짜를 기준으로 현재 날짜 및 시간을 반환합니다.
|CURRENT_DATE
|현재 세센의 타임존 날짜를 기준으로 현재 날짜만 반환합니다.
|Δ
|Oracle은 시간까지 출력하지만 PostgreSQL은 날짜 까지만 나와서 사용시에 변환 필요
|CURRENT_TIMESTAMP
|현재 시간을 타임스탬프 형식으로 리턴
|CURRENT_TIMESTAMP
|현재 시간을 타임스탬프 형식으로 리턴
|O
|변환 필요 없음.
|EXTRACT
|datetime 형식 또는 interval 형식에서 특정 포맷 부분만 뽑아냄
|EXTRACT
|datetime 형식 또는 interval 형식에서 특정 포맷 부분만 뽑아냄
|O
|변환 필요 없음.
|LAST_DAY
|날짜 데이터를 입력으로 받아 해당 월의 마지막 날짜를 반환합니다.
|없음
|없음
|Δ
|Orafce 사용 또는 사용자 정의 함수로 구현 가능
|MONTHS_BETWEEN
|입력 받은 두 날짜의 차이를 출력(단위 : 개월)
|없음
|없음
|Δ
|Orafce 사용 / 사용자 정의 함수로 구현 가능 / DATE_PART 함수로 대체 사용 가능
|SYSDATE
|현재 날짜와 시간을 출력해주며, 데이터베이스 서버의 OS 시간을 기준으로 합니다.
|NOW()
|현재 날짜와 시간을 출력해주며, 소수점 자리의 초 단위 까지 출력해줍니다.
|Δ
|출력 포맷(초 단위)가 달라서 사용시에 변환이 필요할 수 있음

|SYSTIMESTAMP
|현재 날짜와 시간을 소수점 자리의 초 단위와 타임존을 적용해서 출력 해줍니다.
|NOW()
|현재 날짜와 시간을 출력해주며, 소수점 자리의 초 단위까지 출력 해줍니다.
|Δ
|출력되는 값은 같으나 출력 포맷(초단위 부터)이 달라서 사용시에 변환이 필요할 수 있습니다.

|LOCALTIMESTAMP
|현재 세션의 날짜와 시간을 타임스탬프 포맷으로 출력해줍니다.
|LOCALTIMESTAMP
|현재 세션의 날짜와 시간을 타임스탬프 포맷으로 출력해줍니다.
|O
|변환 필요 없음

|TO_CHAR(datetime)
|Datetime 또는 Timestamp 자료형의 데이터를 VARCHAR2 타입으로 변환 및 지정한 포맷으로 출력해줍니다.
|TO_CHAR(datetime)
|Timestmap 자료형의 데이터를 VARCHAR 타입으로 변환 및 지정한 포맷으로 출력해줍니다.
|O
|변환 필요 없음.

|TRUNC(date)
|날짜 데이터에서 '일' 단위 밑으로 잘라서 출력해줍니다. 출력시에 시간은 00:00:00으로 출력되게 됩니다.
|DATE_TRUNC('format',date)
|날짜 데이터를 1번 파라미터를 기준 포맷으로 자르게 됩니다.
|Δ
|Oracle은 day를 기준으로 날짜 데이터를 자르며, PostgreSQL은 설정한 포맷으로 자르기 때문에 변환시에 포맷 파라미터를 추가 해주어야한다.

|DECODE
|IF-THEN-ELSE 구문 기능처럼 동작합니다.
|DECODE
|Oracle의 Decode와 기능적으로 관련이 없는 함수입니다.
|Δ
|CASE WHEN 구문으로 대체해서 작성해야 합니다.

|DUMP
|VARHCAR2 값을 반환하며, 데이터타입 코드, 바이트 길이 등을 포함합니다.
|지원하지 않음
|지원하지 않음
|X
|변환 방법 없음

|ORA_HASH
|주어진 표현에 대한 해시 밸류 값을 계산합니다.
|지원하지 않음
|지원하지 않음
|X
|변환 방법 없음

|CASE
|단일 또는 여러가지 조건(WHEN)을 순차적으로 비교해서 조건에 맞을 경우 THEN 구문의 내용을 실행하며, 모든 조건에 해당하지 않을 경우 ELSE 구문이 실행됩니다.
|CASE
|단일 또는 여러가지 조건(WHEN)을 순차적으로 비교해서 조건에 맞을 경우 THEN 구문의 내용을 실행하며, 모든 조건에 해당하지 않을 경우 ELSE 구문이 실행됩니다.
|O
|변환 필요 없음.

|COALESCE
|파라미터 중에서 NULL이 아닌 결과가 나오는 가장 첫 번째 파라미터를 반환합니다.
|COLASECE
|파라미터 중에서 NULL이 아닌 결과가 나오는 가장 첫 번째 파라미터를 반환합니다.
|O
|변환 필요 없음

|NULLIF
|1번 파라미터와 2번 파라미터를 비교해서 둘이 같을 경우 NULL을 반환하며, 그렇지 않을 경우 1번 파라미터를 반환합니다.
|NULLIF
|1번 파라미터와 2번 파라미터를 비교해서 둘이 같을 경우 NULL을 반환하며, 그렇지 않을 경우 1번 파라미터를 반환합니다.
|O
|변환 필요 없음

|NVL
|1번 파라미터의 값이 NULL일 경우, 2번 파라미터로 대체하여 출력 합니다.
|지원하지 않음
|지원하지 않음
|Δ
|COALESCE를 사용하여 대체 가능

|NVL2
|1번 파라미터의 값이 NULL일 경우, 2번 파라미터를 출력, NULL이 아닐 경우 3번 파라미터를 출력합니다.
|지원하지 않음
|지원하지 않음
|Δ
|CASE문을 이용하여 변환할 수 있음. Ex) CASE WHEN ColumnA IS NULL THEN 'O' ELSE 'X' END

|SYS_GUID
|16바이트의 globally unique identifier raw value를 생성합니다.
|UUID_GENERATE_V1() / GEN_RANDOM_UUID
|UUID-OSSP 확장 모듈의 기능 / PGCRYPTO 확장 모듈의 기능
|Δ
|확장 모듈을 추가적으로 설치해야합니다.

|UID
|세션 유저에 대한 유니크한 정수 값을 반환해줍니다.
|지원하지 않음
|지원하지 않음
|X
|변환 방법 없음

|USER
|세션 유저의 이름을 반환 해줍니다.
|USER
|세션 유저의 이름을 반환 해줍니다.
|O
|변환 필요 없음

|USERENV
|세션 유저가 사용하는 파라미터를 반환 해줍니다.
|지원하지 않음
|지원하지 않음
|Δ
|USERENV 각각에 대한 사용자 정의함수로 구현할 수 있음.

|CAST
|데이터 타입 또는 컬렉션 타입을 다른 타입으로 변경 해줍니다.
|CAST
|데이터 타입을 다른 타입으로 변경해줍니다.
|O
|변환 필요 없음.

|CONVERT
|문자열의 캐릭터 셋을 변경해줍니다.
|지원하지 않음
|지원하지 않음
|X
|변환 방법 없음

|TO_CHAR(string / numeric)
|NCHAR, NVARCHAR2, CLOB, NCLOB 데이터를 데이터베이스 캐릭터셋에 맞게 변환해줍니다. 
|TO_CHAR
|1번 째 파라미터를 2번 째 파라미터 형식으로 변환 해줍니다.
|X
|Oracle은 캐릭터셋을 변경하지만, PostgreSQL은 포맷만 변환해줌

|TO_DATE
|CHAR, VARCHAR2, NCHAR, NVARCHAR2 타입의 데이터를 DATE 타입으로 변경해줍니다.
|TO_DATE
|문자열 데이터를 date 형식으로 변경 해줍니다.
|Δ
|

|TO_NUMBER
|1번 파라미터 문자열을 2번째 파라미터인 정규식에 맞게 number 데이터로 변환 해줍니다.
|TO_DATE
|1번 파라미터 문자열을 2번째 파라미터인 정규식에 맞게 numeric 데이터로 변경 해줍니다.
|Δ
|Oracle의 Number 타입과 PostgreSQL의 Numeric 타입은 호환되지 않기 때문에, 데이터 타입의 차이를 이해하고 변환해야 함. 


|AVG
|파라미터의 평균 값을 반환해줍니다.
|AVG
|파라미터의 평균 값을 반환해줍니다.
|O
|변환 필요 없음

|COUNT
|쿼리 실행시의 결과 로우의 갯수를 반환합니다.
|COUNT
|쿼리 실행시의 결과 로우의 갯수를 반환합니다.
|O
|변환 필요 없음

|LISTAGG
|WITH IN GROUP(ORDER BY)를 기준으로 데이터를 정렬한 다음 구분자를 붙여서 데이터를 나열해줍니다.
|STRING_AGG
|1번 파라미터들 사이에 2번 구분자를 두어 나열합니다.
|Δ
|구분자를 두고 나열하는 기본 기능은 둘 다 비슷하나, 문법의 차이가 있고 부가적인 기능(ON OVER 등)의 경우 PostgreSQL은 지원하지 않음

|MAX
|해당 파라미터의 최대 값을 리턴합니다.
|MAX
|해당 파라미터의 최대 값을 리턴합니다.
|O
|변환 필요 없음

|MIN
|해당 파라미터의 최소 값을 리턴합니다.
|MIN
|해당 파라미터의 최소 값을 리턴합니다.
|O
|변환 필요 없음

|SUM
|해당 파라미터의 합계를 리턴합니다.
|SUM
|해당 파라미터의 합계를 리턴합니다.
|O
|변환 필요 없음

|FETCH
|출력 값이 여러 행인 쿼리에서 특정 로우까지만 출력합니다.
|FETCH 또는 LIMIT
|출력 값이 여러 행인 쿼리에서 특정 로우까지만 출력합니다.
|O
|변환 필요 없음

|===